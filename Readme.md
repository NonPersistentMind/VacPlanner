## **Проект "The Dashboard"**

### Слайд 1
**Що?**

* Аналітичний інструмент
* Рекомендаційна система
* Інструмент моніторингу забезпеченості вакциною
* Красиве місце, куди можна зайти самому або покликати друзів на каву і аналіз даних

### Слайд 2
**Навіщо?**

* Якщо рішення, на яке йде 2 дні, можна прийняти за два кліки мишею, навіщо відмовлятись?
* Це не олд спайс, коли ми витрачаємо цілі дні, аби зрозуміти, куди ж подіти цей мільйон флаконів БЦЖ, які не вміщаються на складах.
* Не знаєте, чи вистачить у Львівській області КПК, аби вакцинувати усіх новонароджених поплічників Фаріон протягом наступних 6 місяців?
* Досі возимо вакцину в Краків, бо думаємо, що це Львівська область?
* Або може, хтось серед присутніх просто щиро цікавиться, скільки ж вакцини витрачає ця Франківська область і чому вони постійно просять ще?

### Слайд 3
Дозвольте представити, **проект з секретною назвою "The Dashboard"**

> (усі співпадіння з "Зе" атрибутикою чинного Президента абсолютно випадкові). 

* **Регіональна аналітика: скільки вакцини, в якій області?**
(Зображення)

* **Позакладна аналітика з можливістю знайти усі заклади, в яких застрягли наші позавчорашні поставки.**
(Зображення)

* **Аналітика забезпеченості:**
    * Скільки незіпсованої вакцини матиме Тернопіль через пів року?
    (Зображення)

    * На скільки вистачить поточної кількості АКДП у Києві, враховуючи середнє використання і терміни придатності?
    (Зображення)

    * Якої вакцини не вистачає в Дніпрі і звідки її можна привезти?
    (Зображення)

    * Які тренди використання ІПВ в Харкові? Можливо, ОПВ гірше використовується, бо її давно не завозили?
    (Зображення)

* Усі перелічені, а також безліч інших питань, які лише дозволить Ваша уява – тепер в один клік миші (або тачпаду, ми не певні).

### Слайд 4
**Припустимо, нам подобається. Що вам потрібно?**

Зараз система виконує розрахунки, базуючись на даних зі `скрижалей Стариченка` і кількох допоміжних файлів: `використання` і `серії препаратів`. 

> Однак загалом, працювати вона може на будь-яких даних цього типу, які мають мати наступні складові:

1. **ЄДРПОУ** закладу. Використовується для уніфікації закладів: іншими словами, аби 14 варіантів назв "Міська лікарня міста Київ №1" не фігурували як 14 різних закладів;
2. **Регіон**. Очевидно, для порегіонної класифікації і відображення на мапах;
3. **Назва закладу** (або унікальне відображення ЄДРПОУ в назву). Для аналізу на позакладному рівні;
3. **Назва вакцини** (або серія, і, окремо, відображення серії в назву). Для демонстрації інформації повакцинно. Теж тривіально;
4. **Термін придатності**. Для формування прогнозу забезпеченості вакциною і відображення того, на скільки вистачить наявної вакцини без врахування використання. Також для визначення потенційної кількості вакцини, яка зіпсується і матиме бути списаною;
5. **Дата оновлення** запису. Для контролю за актуальністю наданих даних;
6. **Кількість доз** вакцини відповідної серії, у відповідному закладі, станом на вказану дату оновлення. Це, власне, і є предметом аналізу;
7. **Використання** вакцин за регіонами. Краще – за закладами. Для адаптивної рекомендації поставляти більше вакцини в один регіон (заклад) і забирати з іншого регіону (закладу).
8. Окремо потрібні дані аналогічного типу, але щодо **вакцин на нац складах**.

### Слайд 5
**Що відбувається всередині?**

**Очистка і трансформація даних:**
1. Назви закладів проставляються, базуючись на ЄДРПОУ. Якщо одному ЄДРПОУ відповідає кілька назв – вони замінюються на першу;
2. Виправляються знайдені раніше помилки: чЕРНІГІВСЬКА ОБЛАСТЬ перейменовується – здогадайтесь в яку. Дані станом на Лютий 223 року стають даними станом на 2023.
3. Назви вакцин проставляються, базуючись на серії вакцини. Для кожної серії обирається назва, найбільш популярна серед тих, які зустрічаються в даних: якщо вакцина серії `С.У.П.Е.Р..В.А.К.Ц.И.Н.А` у 800 закладах має назву "БЦЖ", і ще в 20 – "вакцина проти смерті", ми перейменуємо 20 останніх у "БЦЖ".
4. Назви вакцин перейменовуються в короткі форми.
5. До розрахунку додаються залишки на національних складах.

### Слайд 6
**Що відбувається всередині?**

**Розрахунки**
1. Залишки в регіонах і закладах – сума доз у, відповідно, регіонах і закладах;
2. Цікава секція – "Дефіцитні вакцини". **Тут вакцина вважається дефіцитною, якщо її кількість у регіоні є у 5 разів меншою за середню кількість вакцини по усім регіонам.** "Дивно", - скажете Ви? "Так", – відповім я. Але працює;
3. "Статистика розподілу вакцин за закладами в регіоні". Для кожної вакцини Ви знайдете 4 ключові метрики: 
    * Скільки звітує (з усіх закладів в обраному регіоні);
    * Скільки вакцини в закладі, в якому її найбільша кількість. **Дозволяє помітити, що уся вакцина сконцентрована в кількох закладах, які точно не в змозі її використати**.
    * Метрика, яка, кажучи просто, звучить так: "Більше половини закладів мають менше за ось таку кількість вакцини". Разом із попередньою метрикою яскраво розповідає про рівномірність розподілу вакцин у регіоні;
    * "Жодної одиниці вакцини в ЖовтеЧисло + ЧервонеЧисло". Скільки закладів звітують про відсутність вакцини (жовте) і скільки взагалі не звітує про вакцину (червоне).

### Слайд 7
**Що відбувається всередині?**

**Розрахунки**
1. Кількість вакцини на часовому проміжку, яка є доступною суто за терміном придатності. **Дозволяє планувати нові поставки без врахування використань в регіонах**.
5. Кількість вакцини на часовому проміжку, який буде доступний, виходячи з термінів придатності і використання у кожному регіоні. Показує, коли закінчиться наявна в кожному регіоні вакцина, якщо регіон збереже своє середньомісячне споживання (середнє за останні 12 місяців).
6. Підрахунок помісячного і середньомісячного споживання кожного регіону. **"Останні 12 місяців" беруться з дати оновлення дашборду, тож <u>якщо у нас немає даних по споживанню за 5 останніх місяців, то насправді це буде "середньомісячне споживання за 7 місяців року"</u>**.
7. Тренди у споживанні за кожним регіоном. **Дозволяє заздалегідь помічати ситуації, коли регіону потрібно більше/менше вакцини, або коли в регіоні вона закінчується, а він про це мовчить: якщо тренд "спадаючий", то або популярність вакцинації впала, або в регіоні не вистачає вакцини**.
8. "Покриття" регіонів вакциною. Демонструє, на скільки місяців у регіоні вистачає вакцини, використовуючи середньомісячне використання в регіоні.
9. Скільки вакцини очікувано зіпсується у регіоні, якщо не збільшити використання? Використовує планувальник з часопроміжком, аби знайти терміни придатності партій вакцини і кількості вакцини, яку ми не встигаємо вжити до цих дат.
10. На скільки одиниць вакцини на місяць потрібно збільшити використання, аби уникнути псування вакцини? Тут просто – кількість вакцини, яка планується до зіпсування, ділена на час, який маємо, аби її вжити.
11. Необхідне донасичення. Скільки вакцини потрібно привезти в регіон, аби покрити його потреби на 3/6/12 місяців. Середньомісячне споживання, множене на інтервал часу, який треба покрити.

### Слайд 8
**Функціонал**

1. Вакцини на кожному графіку можна додавати/прибирати з візуалізації шляхом клікання на "легенду". Подвійний клік на легенду залишає лише обрану вакцину. Аби показати всі – тисність кружечок в правому верхньому кутку;
2. Радіальна діаграма. 
    * Довга історія, але вона дозволяє переглядати вакцини в розрізі Вакцина ▶️ Регіон ▶️ Заклад. Можна заглиблюватись у регіони і бачити усі заклади, які мають цю вакцину, разом із залишками у закладах;
    * Пошук в діаграмі шукає за принципом "Шукаю такі слова в назвах областей. Якщо не знаходжу – шукаю в назвах закладів"
3. Статистика після радіальнох діаграми фільтрується за регіоном. Не новина, але варто згадування;

### Слайд 9
**Функціонал**

4. Графік прогнозу:
    * Фільтрується за регіоном;
    * Має легенду, яка перемикається. Аналогічно іншим легендам, подвійний клік на вакцину показує лише її. Клік на кружечок у правому кутку повертає усі вакцини назад;
    * Внизу графіка – фільтр за датами. Працює просто, але ще простіше – спробувати;
    * Справа від регіонального фільтру – перемикач використання. У вимкненому режимі показує прогноз лише за термінами придатності, в увімкненому – за термінами придатності і середньомісячним використанням. В обох є свої плюси.

### Слайд 10
**Функціонал**

5. Секція після графіку з прогнозом.
    * Поділяє один перемикач використання і фільтр регіону на двох з попередньоописаним графіком: перемкнувши в одному місці, дані зміняться в обох;
    * Легенда в діаграмі використання працює аналогічно усім іншим. Повторюватись втретє не буду;
    * В діаграмі "покриття вакциною" справа вгорі є маленька іконка карти. Це – портал у інший вимір, де забезпеченість показується не у форматі "усі вакцини, один регіон", а у форматі "усі регіони, одна вакцина". 
    > Я використовую це так: перша форма показує, які існують проблеми в регіоні, друга – як їх вирішити. Приклад – на першому графіку, обравши "Миколаївська", бачу, що в Миколаївській області не вистачає АДП. Перемикаючись на вигляд карти і вакцину "АДП" можу бачити, що поруч з Миколаївською є перенасичена Херсонська (забезпечена на 12.3 місяці) і Дніпропетровська (на 7.5). Значить, з них можна перевезти вакцину в Миколаївську. Врахувавши ще використання в Миколаївській області, а це приблизно 750 одиниць АДП на місяць, бачу, що одного місяця в Дніпропетровській (з використанням 1900 на місяць) вистачить на покриття Миколаївської майже на 3 місяці. Ось і весь аналіз.
    * Мапа, будучи розфарбованою на основі кількості доз, містить зліва внизу маленький фільтр. Використовуючи його, можна побачити області, які мають деякий обраний рівень забезпеченості. Користуйтесь з любовʼю!

### Слайд 11
**Цікавинки і обмеження**

Ну і куди ж без наших маленьких-чепурненьких проблем з даними або неочікуваних поворотів подій? Не хвилюйтесь, я викладу Вам їх усі:
1. **Цікавинкобмеження:** Заклади не квапляться оновлювати дані. Система використовує найновішу дату оновлення як дату, станом на яку подаються залишки. Відповідно, якщо одні залишки прозвітовано станом на 12.01.2024, а інші – на 21.12.2023, ми вважатимемо останні взятими станом на 12.01.2024. Тепер уявіть, як багато вакцин насправді зникло у закладах за цей період і зрозумійте, чому важливо оновлювати дані часто (принаймні частіше за "раз на місяць").
> Це зроблено, по-перше, для спрощення калькуляції, а по-друге, бо закладам дійсно варто оновлювати дані. В майбутньому ця поведінка буде покращена, але поки маємо працювати всередині цих обмежень.
2. **Цікавинка:** Заклади більшості областей, які не оновлюють дані, все одно в кінцевому файлі `скрижалі Стариченка` виглядають як "оновлені щойно". Причина цьому – формула, яка використовується для переносу даних із регіональних файлів у спільний. Це можна виправити, і краще дійсно це зробити. Деякі регіональні координатори запропонували самим стати "експериментальними зразками" у тому, аби прибрати цю формулу і дати їм трохи більше свободи у звітуванні. Потрібна "воля згори".
3. **Цікавинка:** Через технічні особливості Google Spreadsheet, багато закладів, які звітують, не мають ЄДРПОУ у кінцевій таблиці. Причина – деякі заклади ставлять ЄДРПОУ як число (як наслідок – без нулів спереду), деякі – як текст (з нулями). Spreadsheets не може імпортувати два різних типи даних в один стовпчик (а що ж Ви хотіли? Хороший софт "shits" не назвуть), тому домінуючий формат залишається, а інший ігнорується. Уніфікований формат вирішить цю проблему, або ж перехід до більш дорослого способу звітування. Астрологи оголосили друге пришестя Меддати, яке, сподіваюсь, зможе врятувати наші аналітичні душі.

`Можливо, ще щось...`

### Слайд 12
Well, це все.

Щиро бажаю безпечного неба, хорошої аналітики.

Спасибі, що виділили свій дорогоцінний час на слухання мого екстравагантного бурмотіння. Бережіть себе, і ***нехай прибуде з Вами*** `анаток`***сила*** `для профілактики дифтерії та правця`!



